## 🤔 什么是海明码？

海明码是一种**可以自动纠正单个比特错误**的编码方式。它的关键在于：

> 🧠 **在原始数据中插入校验位（冗余位）**，使得接收方能判断是否出错、出错位置。

---

## 🧮 步骤一：确定需要的校验位数量

假设你有 **k 位数据**，要添加 **r 位校验位**，满足：

$$
2^r \geq k + r + 1
$$

✅ 这是因为总共 $k + r$ 位中，最多可能出错的位是 $k + r$ 个，还有一个表示“无错误”的状态。

---

## 📝 举个例子：数据位是 `1011`（4位）

我们来一步步**计算海明码**👇

---

### 🔢 Step 1：确定校验位个数 `r`

用公式试试：

$$
2^r \geq 4 + r + 1
$$

尝试 r = 3：

$$
2^3 = 8 \geq 4 + 3 + 1 = 8 ✅
$$

所以需要 3 位校验位。

---

### 🧩 Step 2：确定校验位位置（从1开始编号）

我们用 1 开始的位编号（总共 7 位）：

* 第1位 → $2^0 = 1$：校验位 P1
* 第2位 → $2^1 = 2$：校验位 P2
* 第4位 → $2^2 = 4$：校验位 P4

📌 其余位用来放原始数据：`1011`

| 位置 | 1  | 2  | 3  | 4  | 5  | 6  | 7  |
|----|----|----|----|----|----|----|----|
| 内容 | P1 | P2 | D1 | P4 | D2 | D3 | D4 |
| 实际 | ?  | ?  | 1  | ?  | 0  | 1  | 1  |

---

### 🧮 Step 3：计算各个校验位

海明码校验位确定：

|     | _4_ | _2_ | _1_ |
|-----|-----|-----|-----|
| _3_ | 0   | 1   | 1   |
| _5_ | 1   | 0   | 1   |
| _6_ | 1   | 1   | 0   |
| _7_ | 1   | 1   | 1   |

每一列中数字为1作为检查位

#### ✅ P1 检查位：1、3、5、7（即第1、3、5、7位）

```
D1=1, D2=0, D4=1 → 总数 = 1+0+1 = 2（偶数）
→ P1 = 0 ✅
```

#### ✅ P2 检查位：2、3、6、7（即第2、3、6、7位）

```
D1=1, D3=1, D4=1 → 总数 = 1+1+1 = 3（奇数）
→ P2 = 1 ✅
```

#### ✅ P4 检查位：4、5、6、7（即第4、5、6、7位）

```
D2=0, D3=1, D4=1 → 总数 = 0+1+1 = 2（偶数）
→ P4 = 0 ✅
```

---

### 🎉 Step 4：组合成最终海明码

将 P1、P2、P4 依次填入：

| 位置 | 1 | 2 | 3 | 4 | 5 | 6 | 7 |
|----|---|---|---|---|---|---|---|
| 内容 | 0 | 1 | 1 | 0 | 0 | 1 | 1 |

✅ 最终海明码是：**0110011**

---

## 🧪 如果传输出错怎么办？

比如收到的是：**0110111**（第5位出了错）

我们重新计算3个校验位是否有错，若有错，其结果为：

* P1错 → 1
* P2错 → 2
* P4错 → 4
  → 相加得出 **错误位编号：5**（就是第5位出了错）✅

---

## 🧠 总结口诀 📌

| 步骤   | 口诀                   |
|------|----------------------|
| 确定 r | $2^r \geq k + r + 1$ |
| 插入位  | $2^i$ 位置放校验位         |
| 校验规则 | 指定位数参与“奇偶校验”         |
| 出错定位 | 错的校验位编号相加就是错误位       |

