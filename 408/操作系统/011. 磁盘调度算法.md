💽 **操作系统中的磁盘调度算法**  

磁盘调度算法用于决定 **磁头移动的顺序**，以优化 **磁盘 I/O 性能**，减少 **寻道时间（磁头移动的时间）**。  
主要的调度算法有：  

| 算法                 | 主要特点                      | 优缺点                       |
|--------------------|---------------------------|---------------------------|
| **FCFS**（先来先服务）    | 按照请求顺序处理                  | **公平**，但可能导致**长寻道**       |
| **SSTF**（最短寻道时间优先） | 选择最近的磁道请求                 | **减少平均寻道时间**，但可能导致**饥饿**  |
| **SCAN**（电梯算法）     | 磁头**在磁盘两端来回扫描**请求         | **减少整体寻道时间**，但远端请求可能等待较长  |
| **C-SCAN**（单向扫描）   | 磁头**从一端扫到另一端**，然后回到起点重新扫描 | **提供更均衡的等待时间**，避免边缘请求等待太久 |

---

## 1️⃣ **FCFS（First Come First Serve）- 先来先服务**
📌 **原理**：按请求到达的顺序进行调度，不管磁头移动的远近。  
📌 **优点**：简单、公平。  
📌 **缺点**：可能导致大量磁头移动，增加寻道时间。  

**示例**：  
🛠 **假设磁头当前在 50 号磁道**，请求顺序为：**98, 183, 37, 122, 14, 124, 65, 67**  

磁头移动路径如下：
```
50 → 98 → 183 → 37 → 122 → 14 → 124 → 65 → 67
```
⏳ **总移动距离**：643  

---

## 2️⃣ **SSTF（Shortest Seek Time First）- 最短寻道时间优先**
📌 **原理**：每次选择距离**当前磁头位置最近的请求**进行调度。  
📌 **优点**：减少**平均寻道时间**。  
📌 **缺点**：可能导致**饥饿问题**，远端请求长期得不到处理。  

**示例**：  
请求序列：**98, 183, 37, 122, 14, 124, 65, 67**，磁头初始位置：**50**  

按照 **最近磁道优先** 访问：
```
50 → 37 → 14 → 65 → 67 → 98 → 122 → 124 → 183
```
⏳ **总移动距离**：236（比 FCFS 省很多）

---

## 3️⃣ **SCAN（电梯算法）- 扫描算法**
📌 **原理**：磁头像**电梯**一样，朝着一个方向移动，满足所有请求后，掉头继续扫描反向的请求。  
📌 **优点**：避免饥饿，适用于大量请求。  
📌 **缺点**：磁道远端请求等待较长。  

**示例**（假设磁头当前在 50 号磁道，向 **高磁道方向** 移动）：  
请求序列：**98, 183, 37, 122, 14, 124, 65, 67**  

🔹 **先处理较大磁道的请求**：
```
50 → 65 → 67 → 98 → 122 → 124 → 183
```
🔹 **到达最高磁道后，反向处理低磁道请求**：
```
183 → 37 → 14
```
⏳ **总移动距离**：208  

---

## 4️⃣ **C-SCAN（Circular SCAN）- 单向扫描**
📌 **原理**：磁头**只朝一个方向移动**，处理完最高磁道的请求后，**直接回到磁盘最小磁道** 重新扫描，而不回头。  
📌 **优点**：提供**更均衡的等待时间**，避免低磁道请求等待过长。  
📌 **缺点**：磁头移动到最小磁道的过程中，会产生**额外的寻道时间**。  

**示例**（假设磁头当前在 50 号磁道，向 **高磁道方向** 移动）：  
请求序列：**98, 183, 37, 122, 14, 124, 65, 67**  

🔹 **处理较大磁道的请求**：
```
50 → 65 → 67 → 98 → 122 → 124 → 183
```
🔹 **回到磁盘最小磁道 0**（**不处理**）：
```
183 → 0
```
🔹 **重新开始扫描**：
```
0 → 14 → 37
```
⏳ **总移动距离**：199（比 SCAN 更均衡）

---

### **🎯 总结**
| 算法         | 适用场景     | 优点             | 缺点              |
|------------|----------|----------------|-----------------|
| **FCFS**   | 小型系统     | 简单、公平          | 可能寻道距离很长        |
| **SSTF**   | 负载较重的磁盘  | 寻道时间短          | 可能导致饥饿          |
| **SCAN**   | 适用于中大型系统 | 适合高负载、减少平均寻道时间 | 远端请求可能等待较长      |
| **C-SCAN** | 适用于高吞吐场景 | 更均衡            | 可能增加回到起始磁道的寻道开销 |

---

💡 **结论** <br>
🔹 **如果任务少，选 FCFS**  
🔹 **如果追求最短寻道时间，选 SSTF（但可能饥饿）**  
🔹 **如果需要公平性，选 SCAN（适用于负载较大的情况）**  
🔹 **如果要保证所有磁道请求等待均衡，选 C-SCAN**  

