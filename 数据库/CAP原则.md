## 🔺 CAP 原则是啥？

CAP 原则是数据库和分布式系统中非常重要的理论，它告诉我们：

> 在**分布式系统中**，**一致性（C）**、**可用性（A）** 和 **分区容忍性（P）** 三者**最多只能同时满足两个**，**无法三者兼得**。

---

### 💡 先看三个术语代表什么：

| 缩写    | 全称                         | 通俗解释                         |
|-------|----------------------------|------------------------------|
| **C** | Consistency（一致性）           | 所有节点的数据一致，像复制粘贴一样，谁查都一样 📄📄 |
| **A** | Availability（可用性）          | 系统一直能响应请求，不会宕机 🚀            |
| **P** | Partition tolerance（分区容忍性） | 网络出现分区（节点之间断了）时系统还能继续运行 🌐⚡  |

---

### 🧠 通俗理解举例：

假设你和朋友合伙开了**三家奶茶店**（三台服务器），大家都用一个“菜单数据库”同步价格。

> 有一天网络断了（⚡分区了）—— 这时你面临选择：

* **要一致性（C）**：那就先暂停服务，等菜单同步好了再卖！（数据一致）😖
* **要可用性（A）**：菜单先别管对不对，先卖再说！（保持服务）🧋
* **要分区容忍（P）**：三家店网络断了也能继续运行 📡

问题是：**你不能同时要 C + A + P**！

---

## ✅ 常见系统的CAP取舍：

| 系统                        | 选择的两个属性 | 解释                     |
|---------------------------|---------|------------------------|
| **传统关系型数据库**（如 MySQL 单机）  | C + A   | 本地一致 + 响应快（没网络分区问题）    |
| **分布式数据库**（如 MongoDB）     | A + P   | 保证高可用 + 容忍网络故障，可能牺牲一致性 |
| **分布式一致性系统**（如 Zookeeper） | C + P   | 保证一致性 + 网络容错，牺牲部分可用性   |

---

## 📌 总结口诀：

> **CAP 三选二，无法三全**
>
> * **C**：数据一致
> * **A**：系统可用
> * **P**：能抗网络断

---

## 🧠 一句话总结：

> 分布式系统中，**网络出问题时**，你只能选择：**服务不中断**，还是**数据不出错**，两者不可兼得！
